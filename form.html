<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Checkout — NEKOWEAR</title>
<style>
  :root{
    --bg:#071228; --card:#071726; --muted:#aab6c8; --accent:#ff6bcb; --accent-2:#7be3ff; --radius:14px;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#06101b,#071228);color:#eaf2ff;min-height:100vh;padding:28px;}
  .container{max-width:980px;margin:24px auto;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));padding:20px;border-radius:18px;border:1px solid rgba(255,255,255,0.03)}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
  header h2{margin:0}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
  .form-card{background:var(--card);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}
  label{display:block;margin:10px 0 6px;color:var(--muted);font-size:13px}
  input, textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;outline:none}
  textarea{min-height:100px;resize:vertical}
  .product-summary{display:flex;flex-direction:column;gap:12px}
  .p-card{display:flex;gap:12px;align-items:center;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));padding:12px;border-radius:12px}
  .p-thumb{width:120px;height:84px;border-radius:8px;background-size:cover;background-position:center}
  .p-info h4{margin:0;font-size:16px}
  .p-info p{margin:6px 0 0;color:var(--muted);font-size:13px}
  .btn{padding:12px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
  .primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#06101a}
  .outline{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  .small{font-size:13px;color:var(--muted)}

  @media (max-width:900px){
    .grid{grid-template-columns:1fr}
    .p-thumb{width:100px;height:70px}
  }

</style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h2>Checkout</h2>
        <div class="small">Enter your details to complete the order</div>
      </div>
      <div>
        <button class="btn outline" onclick="goHome()">← Continue shopping</button>
      </div>
    </header>

    <div class="grid">
      <div class="form-card">
        <form id="checkoutForm" onsubmit="proceed(event)">
          <label for="fullName">Full name</label>
          <input id="fullName" name="fullName" required placeholder="Sakura Tanaka" />

          <label for="email">Email</label>
          <input id="email" name="email" type="email" required placeholder="you@example.com" />

          <label for="address">Address</label>
          <textarea id="address" name="address" required placeholder="Street, city, state, pincode"></textarea>

          <div style="display:flex;gap:10px;margin-top:14px;align-items:center">
            <button class="btn primary" type="submit">Proceed to Payment</button>
            <button class="btn outline" type="button" onclick="editProduct()">Change product</button>
          </div>
        </form>
      </div>

      <aside class="form-card product-summary">
        <div>
          <strong>Order summary</strong>
          <div class="small">Review the product you're buying</div>
        </div>

        <div id="productArea">
          <!-- JS fills product summary -->
          <div class="small" id="noProd">No product selected. <button style="margin-left:8px" class="btn outline" onclick="goHome()">Shop now</button></div>
        </div>

        <div style="margin-top:auto">
          <div class="small">Protected checkout • Secure payment</div>
        </div>
      </aside>
    </div>
  </div>

<script>
  // load selected product from localStorage
  function loadProduct(){
    const raw = localStorage.getItem('selectedProduct');
    const area = document.getElementById('productArea');
    area.innerHTML = '';
    if(!raw){
      document.getElementById('noProd').style.display = 'block';
      return;
    }
    try{
      const p = JSON.parse(raw);
      document.getElementById('noProd')?.remove?.();
      const div = document.createElement('div');
      div.className='p-card';
      div.innerHTML = `
        <div class="p-thumb" style="background-image:url('${p.img}')"></div>
        <div class="p-info">
          <h4>${p.name}</h4>
          <p class="small">${p.desc}</p>
          <p style="margin-top:8px;font-weight:800">₹${p.price.toLocaleString('en-IN')}</p>
        </div>
      `;
      area.appendChild(div);

    }catch(e){
      console.error(e);
      area.innerHTML = '<div class="small">Error loading product.</div>';
    }
  }

  loadProduct();

  // form submission
  function proceed(e){
    e.preventDefault();
    const raw = localStorage.getItem('selectedProduct');
    if(!raw){ alert('Please select a product first.'); return location.href='index.html'; }
    const product = JSON.parse(raw);
    const fullName = document.getElementById('fullName').value.trim();
    const email = document.getElementById('email').value.trim();
    const address = document.getElementById('address').value.trim();
    if(!fullName||!email||!address){ alert('Please fill all fields.'); return; }

    // store order draft
    const order = { product, fullName, email, address, createdAt: new Date().toISOString() };
    localStorage.setItem('orderDraft', JSON.stringify(order));
    // go to payment page
    window.location.href = 'payment.html';
  }

  function goHome(){ window.location.href = 'index.html'; }
  function editProduct(){ localStorage.removeItem('selectedProduct'); window.location.href='index.html'; }

  // on load, try to autofill user fields if we had saved earlier
  (function autofill(){
    try{
      const draft = JSON.parse(localStorage.getItem('orderDraft')||'null');
      if(draft){
        document.getElementById('fullName').value = draft.fullName || '';
        document.getElementById('email').value = draft.email || '';
        document.getElementById('address').value = draft.address || '';
      }
    }catch(e){}
  })();
</script>
</body>
</html>
